<style type="text/css">
        #controlToggle li {
            list-style: none;
        }
        p {
            width: 512px;
        }
        #options {
            position: relative;
            width: 512px;
        }
        #output {
            float: right;
        }

        /* avoid pink tiles */
        .olImageLoadError {
            background-color: transparent !important;
        }
    </style>




<script src="http://maps.google.com/maps/api/js?v=3.2&sensor=false"></script>
<script type="text/javascript">
  var map, measureControls;
  function init(){
    map = new OpenLayers.Map('map');
            
    var ghyb = new OpenLayers.Layer.Google(
      "Google Hybrid",
      {type: google.maps.MapTypeId.HYBRID, numZoomLevels: 20}
    );

  
  map.addLayers([ghyb]);

  map.addControl(new OpenLayers.Control.LayerSwitcher());
  map.addControl(new OpenLayers.Control.MousePosition());
  var proj = new OpenLayers.Projection("EPSG:4326");
  var point = new OpenLayers.LonLat(gon.longitude, gon.latitude);
  point.transform(proj, map.getProjectionObject());
  map.setCenter((point), 18);

  map.events.register('click', map, handleMapClick);
  function handleMapClick(e)
  {
    var lonlat = map.getLonLatFromViewPortPx(e.xy);
    var lon = lonlat.lon
    var lat = lonlat.lat
    var element = document.getElementById('output');
    var latElement = document.getElementById('lat');
    var lonElement = document.getElementById('lon');
    var out = "";
    out += "coordinates: " + "longitude: " + lon + " latitude: " + lat;
    element.innerHTML = out;
    latElement.innerHTML = lat;
    lonElement.innerHTML = lon;
  }
};
</script>


    <h1 id="title">Project Site</h1>
    <div id="output">
    </div>
    Latitude: <span id="lat"></span><br />
    Longitude: <span id="lon"></span>
    
    <%= form_tag('/format_point', method: 'post') do %>
      <%= label_tag :x_coordinate %>
      <%= text_field_tag :x_coordinate, params[:x_coordinate]%>
      <%= text_field_tag :y_coordinate, params[:y_coordinate]%>
      <%= hidden_field_tag :project_array_id,
      @project.project_arrays.first.id %>
      <%= submit_tag "Create Point" %>
    <% end %>

    <div id="map" class="smallmap"></div>
    <div id="options">
      <ul id="controlToggle">
            <li>
                <input type="radio" name="type" value="none" id="noneToggle"
                       onclick="toggleControl(this);" checked="checked" />
                <label for="noneToggle">navigate</label>
            </li>
            <li>
                <input type="radio" name="type" value="line" id="lineToggle" onclick="toggleControl(this);" />
                <label for="lineToggle">measure distance</label>
            </li>
            <li>
                <input type="radio" name="type" value="polygon" id="polygonToggle" onclick="toggleControl(this);" />
                <label for="polygonToggle">measure area</label>
            </li>
            <li>
              <a href="#" id="finishSketch">finish sketch</a>
            </li>
        </ul>
    </div>
